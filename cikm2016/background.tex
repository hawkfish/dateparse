\subsection{The ICU Date Format Language}

The choice of a date format syntax for generation is somewhat arbitrary, but for the purposes of exposition we will be using the formatting language defined by the ICU open-source project~\cite{ICU}. We chose this format because we were already using ICU in our system, we had access to the source code, and it provides localized date part data for a large number of languages (\textit{e.g.}, month names). ICU's format syntax is typical of most syntax languages and provides a large number of date part codes, and a representative subset of it is reproduced in Table~\ref{tab:icuformats}. The complete syntax is documented at the ICU web site \cite{ICU}.  Other syntaxes can either be generated directly from the algorithms, or by translating the ICU syntax into into the desired syntax. 
(The latter is how our visualization system internally generates formats for RDBMSs that have non-ICU syntax.)
%\vidya{do we need the whole table here?}
%\richard{Chopped it down some more and removed multi-line descriptions. All we really need to get across is that there are lots of different time zones, etc., so  fewer examples are OK I think.}
\begin{table}[ht]
\centering
\bgroup
\def\arraystretch{1.5}
\begin{tabular}{|p{0.2\linewidth}| p{0.5\linewidth}|}
\hline
\textbf{ICU Code} & \textbf{Interpretation}\\ \hline

\scriptsize{yy} & \scriptsize{year (96)}\\ \hline
\scriptsize{yyyy} & \scriptsize{year (1996)}\\ \hline
    
\scriptsize{QQ} & \scriptsize{quarter (02)}\\ \hline
\scriptsize{QQQ} & \scriptsize{quarter (Q2)}\\ \hline
\scriptsize{QQQQ} & \scriptsize{quarter (2nd quarter)}\\ \hline
    
\scriptsize{MM} & \scriptsize{month in year (09)}\\ \hline
\scriptsize{MMM} & \scriptsize{month in year (Sept)}\\ \hline
\scriptsize{MMMM} & \scriptsize{month in year (September)}\\ \hline
    
\scriptsize{dd} & \scriptsize{day in month (02)}\\ \hline
    
\scriptsize{EEE} & \scriptsize{day of week (Tues)}\\ \hline
\scriptsize{EEEE} & \scriptsize{day of week (Tuesday)}\\ \hline
    
\scriptsize{a} & \scriptsize{am/pm marker (pm)}\\ \hline
    
\scriptsize{hh} & \scriptsize{hour in am/pm 1:12 (07)}\\ \hline
\scriptsize{HH} & \scriptsize{hour in day 0:23 (00)}\\ \hline
\scriptsize{mm} & \scriptsize{minute in hour (04)}\\ \hline
\scriptsize{ss} & \scriptsize{second in minute (05)}\\ \hline
    
\scriptsize{S} & \scriptsize{millisecond (2)}\\ \hline
\scriptsize{SS} & \scriptsize{millisecond (23)}\\ \hline
\scriptsize{SSS} & \scriptsize{millisecond (235)}\\ \hline

\scriptsize{zzz} & \scriptsize{Time Zone: (PDT)}\\ \hline

\scriptsize{Z} & \scriptsize{Time Zone: RFC 822 (-0800)}\\ \hline
\scriptsize{ZZZZ} & \scriptsize{Time Zone: (GMT-08:00)}\\ \hline
\scriptsize{ZZZZZ} & \scriptsize{Time Zone: ISO8601 (-08:00)}\\ \hline
    
\scriptsize{'} & \scriptsize{escape for text}\\ \hline

\end{tabular}
\egroup
\caption{ICU Format Codes.}
\label{tab:icuformats}
\end{table}

While fairly extensive, the ICU syntax has a few limitations when working with real-world data. It has no support for 4-letter month abbreviations (\textit{e.g.}, \texttt{Sept.}), ordinal days (\textit{e.g.}, \texttt{July 4th}), quarter postfix notation (\textit{e.g.}, \texttt{2Q}) and variant meridian markers (\textit{e.g.}, \texttt{a.m.}). 
These limitations did not affect the results significantly, and in the future we hope to submit handlers for these formats to the ICU project. 

\subsection{The \dateparse\ Function}

The date format generated by the algorithms is presumed to be a string argument to a scalar function called \dateparse, which converts a string value to a date value using the format string. Several examples of this kind of function can be found in RDBMSs such as MySQL's \functionname{STR_TO_DATE}, Oracle's \functionname{TO_TIMESTAMP} and Postgres' \functionname{TO_TIMESTAMP}. There are also programming language library implementations such as Python's \functionname{strptime} and ICU's own \functionname{DateFormat::parse}.
